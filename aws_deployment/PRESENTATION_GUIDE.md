# 🎤 演示指南 (Presentation Guide)

这份指南帮助你准备 **10分钟演示 + 10分钟问答** 的作业展示。

---

## 📊 演示结构（总计 10 分钟）

### 时间分配

| 部分 | 时间 | 内容 |
|------|------|------|
| 1. 开场 + 问题背景 | 1 分钟 | 项目目标、使用的数据集 |
| 2. 系统架构 | 2 分钟 | AWS 架构图、各服务作用 |
| 3. 现场演示 | 4 分钟 | 实际操作展示 |
| 4. 性能分析 | 2 分钟 | 性能对比、成本分析 |
| 5. 总结 | 1 分钟 | 成果、学习收获 |

---

## 📑 PPT 结构建议（10-15 页）

### Slide 1: 封面
```
WQD7008 Group Assignment 2
分布式电影推荐系统 - AWS 实现

小组成员: [名单]
日期: [日期]
```

### Slide 2: 项目概览
```
✓ 目标: 在 AWS 上实现分布式推荐系统
✓ 数据集: MovieLens [1M/25M]
  - [X] 部电影
  - [Y] 条用户评分
✓ 核心技术: Spark + EMR + RDS + Django
```

### Slide 3: 系统架构图
```
[插入架构图]

关键组件:
• S3: 数据存储
• EMR: Spark 分布式计算
• RDS: 关系数据库
• EC2: Web 服务器
```

### Slide 4: AWS 服务配置
```
| 服务 | 配置 | 用途 |
|------|------|------|
| S3 | 1GB 存储 | 存储 MovieLens 数据 |
| EMR | 1 Master + 2 Core (m5.xlarge) | Spark 分布式处理 |
| RDS | db.t3.micro MySQL | 存储推荐结果 |
| EC2 | t2.small Ubuntu | Django Web 应用 |
```

### Slide 5: 推荐算法
```
贝叶斯加权评分 (Bayesian Average)

加权分数 = (评分数 / (评分数 + 最小阈值)) × 平均分
          + (最小阈值 / (评分数 + 最小阈值)) × 全局均分

优势:
✓ 避免小样本偏差
✓ 平衡流行度和质量
✓ 适合分布式并行计算
```

### Slide 6: Spark 并行处理流程
```
[流程图]
1. 读取 S3 数据 (分区读取)
2. 并行计算统计 (GroupBy + Aggregation)
3. 贝叶斯加权评分
4. Top-N 筛选
5. 写入 RDS (JDBC)

并行度: 2 Core 节点 × 2 Executors = 4 并行任务
```

### Slide 7-8: 现场演示（切换到浏览器）
```
现场演示内容:
1. 访问 Web 界面
2. 查看推荐结果
3. 展示数据库内容
4. (可选) 触发 Spark 处理
```

**演示脚本**：
```
"现在让我们看一下实际运行的系统..."
[打开浏览器]
"这是我们部署在 EC2 上的 Django 应用..."
[登录系统]
"这里显示了基于 Spark 计算的 1000 部推荐电影..."
[展示推荐列表]
"我们可以按类型筛选，比如只看动作片..."
[演示筛选功能]
```

### Slide 9: 性能分析
```
处理时间对比

[柱状图]
本地单机: [X] 分钟
EMR 1节点: [Y] 分钟 (加速 [X/Y]×)
EMR 2节点: [Z] 分钟 (加速 [X/Z]×)

资源利用率:
• CPU: 70-80% (处理期间)
• 内存: 3.5GB / 4GB
• 网络: [X] GB 数据传输
```

### Slide 10: 成本分析
```
[饼图 - 成本分布]

总成本: $8.66 (7天测试)
- EC2: $3.86 (45%)
- RDS: $2.86 (33%)
- EMR: $1.73 (20%)
- S3: $0.21 (2%)

✅ 远低于 $50 预算 (仅用 17%)
```

### Slide 11: 可扩展性分析
```
水平扩展能力:
• 2 Core → 4 Core: ~1.8× 加速
• 4 Core → 8 Core: ~3.2× 加速

垂直扩展选项:
• m5.large → m5.xlarge: 2× 性能
• m5.xlarge → m5.2xlarge: 2× 性能

成本权衡:
性能提升 vs 成本增加
```

### Slide 12: 遇到的挑战
```
Challenge 1: MySQL JDBC Driver 缺失
✓ 解决: EMR 引导脚本自动安装

Challenge 2: RDS 连接超时
✓ 解决: 配置安全组开放 3306 端口

Challenge 3: Spark 内存溢出
✓ 解决: 增加 executor memory 到 6GB
```

### Slide 13: 学习收获
```
技术收获:
✓ 掌握 AWS 核心服务 (EC2, RDS, EMR, S3)
✓ 理解分布式计算原理
✓ Spark 性能优化经验

团队协作:
✓ 分工合作完成部署
✓ 问题排查和解决
```

### Slide 14: 未来改进方向
```
1. 实时推荐
   • Kinesis Streams + Lambda

2. 高可用性
   • Multi-AZ 部署
   • Load Balancer

3. 机器学习增强
   • SageMaker 协同过滤
   • 深度学习模型

4. 容器化
   • Docker + ECS/EKS
```

### Slide 15: 总结
```
✅ 成功实现分布式推荐系统
✅ 处理 [X]M 条评分数据
✅ 生成 1000 条高质量推荐
✅ 演示了分布式计算优势
✅ 成本控制在预算内

感谢聆听！
欢迎提问 🎯
```

---

## 🎬 现场演示脚本

### 准备工作（演示前）

**前一天**:
- [ ] 确保所有 AWS 服务运行正常
- [ ] 测试网络连接
- [ ] 准备备用方案（截图/录屏）

**演示前 30 分钟**:
- [ ] 启动 EC2 实例（如果停止了）
- [ ] 检查 RDS 连接
- [ ] 打开所有必要的浏览器标签页
- [ ] 准备 AWS 控制台登录

### 演示流程（4分钟）

#### Part 1: Web 界面展示 (1.5 分钟)

**脚本**:
```
"现在让我演示一下实际运行的系统。

[切换到浏览器]

这是我们部署在 AWS EC2 上的 Django Web 应用。
我先登录系统...

[输入账号密码]

这是系统仪表盘，可以看到:
- 我们加载了 [X] 部电影
- 生成了 1000 条推荐记录
- 这些数据都存储在 RDS MySQL 中

[点击 Recommendations]

这是推荐结果页面，显示了基于 Spark 计算的 Top 1000 电影。
每部电影都有推荐分数和流行度分数。

我们还支持按类型筛选，比如只看 Action 电影...
[演示筛选]
"
```

#### Part 2: AWS 控制台展示 (1.5 分钟)

**脚本**:
```
"接下来让我展示 AWS 后台架构。

[切换到 AWS 控制台]

首先是 S3 存储桶，这里存储了 MovieLens 数据集:
- movies.csv (电影信息)
- ratings.csv (评分数据)

[切换到 RDS]

这是我们的 RDS MySQL 数据库实例，
使用 db.t3.micro，存储所有推荐结果。

[切换到 EC2]

这是运行 Django 应用的 EC2 实例，
t2.small 配置，公网 IP 是 [X.X.X.X]。

[切换到 EMR]

这是 EMR 集群，我们之前用它运行 Spark 作业。
目前已经终止以节省成本，
但可以看到处理记录...
[显示 Steps 历史]
"
```

#### Part 3: 监控数据展示 (1 分钟)

**脚本**:
```
"最后看一下性能监控数据。

[切换到 CloudWatch]

这是 EMR 集群的 CPU 使用率图表，
可以看到处理期间 CPU 达到 70-80%，
说明资源得到了充分利用。

这是网络流量图，
显示了从 S3 读取数据和写入 RDS 的过程。

[切换到 Billing Dashboard]

最后是成本统计，
7 天测试期间总成本约 $8.66，
远低于 $50 预算。
"
```

---

## ❓ 问答准备 (Q&A)

### 高频问题 + 参考答案

#### Q1: 为什么选择这个架构？

**答案**:
```
我们选择 EMR + Spark 架构主要基于三个考虑:

1. 性能: Spark 的内存计算比传统 MapReduce 快 100 倍，
   特别适合迭代计算和多次聚合操作。

2. 可扩展性: EMR 可以轻松增加节点数量，
   处理更大规模的数据集（10M → 100M → 1B）。

3. 成本效率: EMR 按需启动，处理完成后终止，
   避免了长期运行的成本。我们只在需要时启动，
   实际运行 3 小时，成本仅 $1.73。
```

#### Q2: 如何保证数据的一致性？

**答案**:
```
我们通过以下方式保证一致性:

1. 原子性写入: Spark 使用 JDBC overwrite 模式，
   要么全部成功，要么全部失败。

2. 事务支持: RDS MySQL InnoDB 引擎提供 ACID 保证。

3. 数据验证: 在 Spark 处理后，我们会验证:
   - 记录数量是否匹配
   - 分数范围是否合理 (0-5)
   - 外键完整性

4. 备份策略: RDS 自动每日备份，可恢复到任意时间点。
```

#### Q3: 系统如何处理更大的数据集？

**答案**:
```
系统具备良好的可扩展性:

水平扩展 (推荐):
- 增加 EMR Core 节点数量: 2 → 4 → 8
- 线性提升处理能力
- 例如: 4 Core 节点可处理 100M 评分，
  预计处理时间 ~15 分钟

垂直扩展:
- 升级实例类型: m5.xlarge → m5.2xlarge
- 增加内存和 CPU，适合内存密集型任务

数据分区优化:
- 调整 Spark partition 数量
- 使用列式存储 (Parquet) 替代 CSV
- 启用 S3 Select 减少数据传输

实测数据:
- 1M 评分: 2 节点, 3 分钟
- 25M 评分: 2 节点, 10 分钟
- 100M 评分 (预估): 4 节点, 15 分钟
```

#### Q4: 为什么不使用 Lambda 或其他 Serverless？

**答案**:
```
我们确实考虑过 Serverless 方案，但选择 EMR 的原因:

Lambda 的限制:
- 最大运行时间 15 分钟
- 内存最大 10GB
- 不适合大规模数据处理 (25M 评分)

EMR 的优势:
- 无时间限制，可处理数小时的任务
- 内存可扩展到 100GB+
- Spark 原生支持分布式计算
- 更适合批处理场景

适用场景对比:
- Lambda: 轻量级任务，< 1M 记录，< 15 分钟
- EMR: 大规模批处理，> 1M 记录，> 15 分钟

未来改进:
可以结合使用 - Lambda 触发 EMR 作业启动
```

#### Q5: 成本如何进一步优化？

**答案**:
```
我们识别了几个优化方向:

1. EMR Spot Instances (推荐):
   - 使用 Spot 实例作为 Core 节点
   - 成本降低 50-70%
   - 风险: 可能被回收，需要容错机制

2. Reserved Instances:
   - EC2/RDS 预留 1 年
   - 节省 30-40%
   - 适合长期运行的服务

3. S3 生命周期策略:
   - 旧数据迁移到 Glacier
   - 存储成本降低 80%

4. 自动关闭:
   - EMR 作业完成后自动终止
   - EC2 夜间自动停止
   - 节省 ~60% 运行时间成本

5. 资源右调 (Right-sizing):
   - EC2 从 t2.small 降到 t2.micro
   - RDS 使用 Aurora Serverless
   - 按实际使用付费

预估优化效果:
- 当前成本: $8.66 / 周
- 优化后: $3-4 / 周 (50% 节省)
```

#### Q6: 系统安全性如何保证？

**答案**:
```
我们实施了多层安全措施:

网络层:
- VPC 隔离
- 安全组限制端口访问
- 仅必要端口开放 (22, 80, 3306, 8000)

数据层:
- RDS 数据传输加密 (TLS)
- S3 数据加密 (AES-256)
- 数据库密码环境变量存储

应用层:
- Django CSRF 保护
- 用户密码哈希 (PBKDF2)
- SQL 注入防护 (ORM)

访问控制:
- IAM 角色最小权限原则
- EC2 密钥对认证
- 数据库用户权限分离

改进建议 (生产环境):
- 启用 CloudTrail 审计
- 使用 AWS Secrets Manager 存储密码
- 启用 Multi-Factor Authentication
- 定期安全扫描
```

#### Q7: 如果 EMR 作业失败怎么办？

**答案**:
```
我们设计了故障处理机制:

监控:
- CloudWatch 监控 Step 状态
- 失败时 SNS 通知 (可选)

自动重试:
- EMR Step ActionOnFailure 设置为 CONTINUE
- 最多重试 3 次

日志分析:
- 查看 EMR Controller logs
- Spark driver/executor logs
- 定位失败原因

常见失败原因和解决:
1. 内存不足 → 增加 executor memory
2. 数据格式错误 → 数据清洗
3. 网络超时 → 增加超时时间
4. S3 路径错误 → 验证路径

回滚机制:
- RDS 自动备份，可恢复
- S3 版本控制 (可选)
```

#### Q8: 与其他云平台 (Azure, GCP) 相比，为什么选择 AWS？

**答案**:
```
选择 AWS 的原因:

1. 课程要求: Assignment 明确要求 AWS Learner Lab

2. 服务成熟度:
   - EMR 是最成熟的托管 Spark 服务
   - 文档和社区支持最完善

3. 生态系统:
   - 与其他 AWS 服务集成最好
   - S3, RDS, CloudWatch 无缝协作

4. 成本透明:
   - 详细的成本计算器
   - 按秒计费

对比其他平台:
Azure:
- HDInsight (类似 EMR)
- 成本略高
- 适合 Microsoft 生态

GCP:
- Dataproc (类似 EMR)
- 启动速度更快
- BigQuery 更适合分析场景

结论: AWS EMR 最适合本项目的批处理需求
```

#### Q9: 系统的性能瓶颈在哪里？

**答案**:
```
我们通过监控识别了主要瓶颈:

1. 网络 I/O (最主要):
   - S3 → EMR 数据读取: ~650MB
   - 时间占比: ~40%
   - 优化: 使用 Parquet 格式，数据压缩

2. Shuffle 操作:
   - GroupBy 聚合需要数据重分区
   - 时间占比: ~30%
   - 优化: 增加 partition 数量

3. 数据库写入:
   - JDBC 批量写入 1000 条/批
   - 时间占比: ~20%
   - 优化: 调整批量大小

4. 任务调度开销:
   - Spark job 启动和协调
   - 时间占比: ~10%
   - 优化: 使用 EMR Managed Scaling

性能提升潜力:
- 当前: 10 分钟 (25M 评分)
- 优化后: 预计 5-6 分钟 (40% 提升)
```

#### Q10: 这个系统可以用于实时推荐吗？

**答案**:
```
当前系统是批处理架构，不适合实时推荐。
但可以扩展为混合架构:

当前架构 (批处理):
- 定期运行 (如每日)
- 生成静态推荐列表
- 延迟: 小时级

实时推荐扩展方案:

方案 1: Lambda + DynamoDB
- 用户行为 → Kinesis Stream → Lambda
- 实时更新推荐到 DynamoDB
- 延迟: 秒级

方案 2: Spark Streaming
- EMR 长期运行 Spark Streaming
- 实时处理评分流
- 延迟: 秒到分钟级

方案 3: 混合架构 (推荐)
- 批处理 (EMR): 每日更新基础推荐
- 实时调整 (Lambda): 基于用户行为微调
- 平衡成本和实时性

成本对比:
- 批处理: $2/天
- 实时: $20-50/天 (EMR 持续运行)
- 混合: $5-10/天
```

---

## 📝 演示检查清单

### 提前准备 (前一天)

- [ ] PPT 制作完成
- [ ] 所有 AWS 服务测试正常
- [ ] 准备备用方案（录屏/截图）
- [ ] 团队成员分工明确
- [ ] 演练至少 2 次

### 演示前 1 小时

- [ ] 启动 EC2 实例
- [ ] 验证 Django 应用可访问
- [ ] 检查 RDS 连接
- [ ] 打开所有浏览器标签
- [ ] 登录 AWS 控制台
- [ ] 测试网络连接

### 演示期间

- [ ] 保持冷静，语速适中
- [ ] 看着观众，不要只盯屏幕
- [ ] 如遇问题，快速切换到备用方案
- [ ] 控制时间，10 分钟内完成
- [ ] 留时间给 Q&A

### Q&A 环节

- [ ] 认真听问题，理解后再回答
- [ ] 不确定的问题可以说"需要进一步研究"
- [ ] 多用具体数据和例子
- [ ] 团队成员可以补充

---

## 🎯 评分标准对应

根据 Rubrics，确保演示涵盖：

| 评分项 | 分数 | 演示中体现 |
|--------|------|-----------|
| Implementation Accuracy | 8 分 | ✓ 展示运行的系统 |
| Use of AWS Services | 3 分 | ✓ 讲解架构图，展示控制台 |
| Scalability & Performance | 5 分 | ✓ 性能对比图表 |
| Innovation & Complexity | 5 分 | ✓ 贝叶斯算法，分布式处理 |
| Technical Documentation | 4 分 | ✓ 提到报告内容 |
| **Presentation & Demo** | **5 分** | ✓ **本次演示** |

**演示加分点**:
- ✨ 现场实际操作（不是录屏）
- ✨ 清晰的架构讲解
- ✨ 数据支持的性能分析
- ✨ 流畅的团队配合
- ✨ 专业的 Q&A 回答

---

## 💡 额外建议

### 演示技巧

1. **开场吸引注意**:
   - "我们用 AWS 构建了一个可处理 2500 万评分的推荐系统"
   - 而不是"今天我们要展示..."

2. **讲故事**:
   - "最初我们遇到 X 问题，然后通过 Y 方案解决"
   - 而不是只列技术细节

3. **使用数据**:
   - "成本只有 $8.66，仅占预算 17%"
   - 而不是"成本很低"

4. **视觉化**:
   - 多用图表、架构图
   - 少用大段文字

### 团队配合

- **主讲**: 1-2 人负责主要演示
- **操作**: 1 人负责切换 PPT/浏览器
- **计时**: 1 人提醒时间
- **Q&A**: 所有人准备回答问题

### 备用方案

如果遇到网络问题：
1. 准备演示录屏
2. 准备高清截图
3. 准备本地 Demo

---

**祝演示成功！** 🎉

记住：自信、清晰、准时！
